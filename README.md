<h1 align="center">SKSEPlugins</h1>
General template for setting up SKSE64 development environment for both AE and SE. 

---
<h2 align="center">Installation</h2>

Clone this repo onto your local environment, execute the command in `PowerShell` **with admin privilege**:  
```powershell
git clone https://github.com/gottyduke/SKSEPlugins
cd .\SKSEPlugins
Set-ExecutionPolicy Bypass -Scope Process
.\!Rebuild BOOTSTRAP
```  
> `BOOTSTRAP` process is required!!  

---
<h2 align="center">New Project</h2>

```
.\!MakeNew <PluginName> 
    [-install PluginMO2InstallName] 
    [-message "Short description for plugin project"] 
    [-vcpkg AdditionalLib1, AdditionalLib2, AdditionalLib3]
```
> When adding additional vcpkg dependencies, make sure to add proper find_package or similar calls in generated project's `CMakeLists.txt` afterwards  

---
<h2 align="center">Preview CMakeLists</h2>

Append the switch `-WhatIf` to the `!Rebuild` command. This action will not initiate CMake generator.  

---
<h2 align="center">Generate VS Solution</h2>

```
.\!Rebuild <MT|MD> <AE|SE> 
    [-Custom] 
    [-WhatIf]
```
> All projects generated by `!MakeNew` command will auto switch to current build target `AE|SE`. Sample usage can be found in the `main.cpp`  

---
<h2 align="center">Add/Remove files</h2>

Supports **directly** adding/removing files in VS by right clicking `Add New Files`, and it will be immediately usable with access to all included directories. The `!Update` script will handle this process with two separate builds, first time will build as usual with no extra action required, second time will update the project with `ZERO_CHECK` before building and prompt for `Reload All` in VS after building. These two builds do not need to be immediately consecutive. All changes in the files before, between, and after building will be carried over. When reloading VS projects after the second build, the newly added files may lose focus in VS tabs if they were open before reloading, simply re-open them from VS solution explorer.   

---
<h2 align="center">VCPKG</h2>

`!Rebuild` auto gathers all vcpkg dependencies from sub projects and build them if required. `!Rebuild` also validates sub project's `CMakeLists.txt` if the vcpkg dependency usage matches the `vcpkg.json`. If a project specified additional dependency in `vcpkg.json` without referring it in the `CMakeLists.txt` (intentional or not), `!Rebuild` will ensure such vcpkg dependency is referred to and linked to the project that listed it as a dependency (if it's linkabe). All these actions are done in the generated top level `CMakeLists.txt` and will not affect the sub project's local `CMakeLists.txt`, however a concern message will be displayed after `!Rebuild` is complete.  
> In short, adding dependencies in `vcpkg.json` will ensure it's usable. 

---
<h2 align="center">Versioning</h2>

Version info may be changed in two ways :
+ Changes in project's `CMakeLists.txt` will be in effect after `!Rebuild` command is ran. 
+ If the Visual Studio solution is open, version info may be updated in the project's `include/Version.h` file, the update will be in effect after build.
> When using the latter, make sure to change both version value and version string

---
<h2 align="center">CLib</h2>

`!Rebuild` builds against [default CommonLib](https://github.com/Ryan-rsm-McKenzie/CommonLibSSE). To use a custom CommonLib, prepare it in the `BOOTSTRAP` process and make sure it has proper `CMakeLists` setup, then append the switch `-C` or `-Custom` to the `!Rebuild` command.  
> When using custom CommonLib, `!Rebuild` assumes it's for current build target (`AE|SE`)  

---
<h2 align="center">DKUtil</h2>

This build setup bundles `DKUtil` header library, full documentation can be found [here](https://github.com/gottyduke/DKUtil).

---
<p align="center">Author: Dropkicker & Maxsu @ 2021</p>