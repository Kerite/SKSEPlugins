# SKSEPlugins
General template for setting up SKSE64 development environment.  

---
## Installation
Clone this repo onto your local environment, execute the command in `PowerShell` **with admin privilege**:  
```powershell
git clone https://github.com/gottyduke/SKSEPlugins
cd .\SKSEPlugins
Set-ExecutionPolicy Bypass -Scope Process
.\!Rebuild BOOTSTRAP
```  
> `BOOTSTRAP` process is required!!  

## New Project
```
.\!MakeNew <PluginName> [-install PluginMO2InstallName] [-message "Short description for plugin project"] [-vcpkg AdditionalLib1, AdditionalLib2, AdditionalLib3]
```
> When adding additional vcpkg dependencies, make sure to add proper find_package or similar calls in generated project's `CMakeLists.txt` afterwards

## Generate VS Solution
```
.\!Rebuild <MT|MD> <AE|SE> [-CustomCLib] [-WhatIf]
```
> All projects generated by `!MakeNew` command will auto switch to current build target `AE|SE`. Sample usage can be found in the `main.cpp`  

## Add/Remove files
Now supports **directly** adding/removing files in VS by right clicking `Add New Files`, and it will be immediately usable with access to all included directories. The `!Update` script will handle this process with two separate builds, first time will build as usual with no extra action required, second time will update the project with `ZERO_CHECK` before building and prompt for `Reload All` in VS after building. These two builds do not need to be continuous. All changes in the files before, between, and after building will be carried over. When reloading VS projects after the second build, the newly added files may lose focus in VS tabs if they were open before reloading, simply re-open them from VS solution explorer.   

## Versioning
Version info may be changed in two ways :
+ Changes in project's `CMakeLists.txt` will be in effect after `!Rebuild` command is ran. 
+ If the Visual Studio solution is open, version info may be updated in the project's `include/Version.h` file, the update will be in effect after build.
> When using the latter, make sure to change both version value and version string

## CLib
`!Rebuild` builds against [default CommonLib](https://github.com/Ryan-rsm-McKenzie/CommonLibSSE). To use a custom CommonLib, prepare it in the `BOOTSTRAP` process and make sure it has proper `CMakeLists` setup, then append the switch `-CustomCLib` to the `!Rebuild` command.  
> When using custom CommonLib, `!Rebuild` presumes it's for current build target (`AE|SE`)  

## DKUtil
This build setup bundles `DKUtil` header library, full documentation can be found [here](https://github.com/gottyduke/DKUtil).

## Preview CMakeLists
Append the switch `-WhatIf` to the `!Rebuild` command. This action will not initiate CMake generator.  

---
<p align="center">Author: Dropkicker & Maxsu @ 2021</p>