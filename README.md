<h1 align="center">SKSEPlugins</h1>
Scripted template for setting up SKSE64 development environment for both AE and SE. 


<h2 align="center">Installation</h2>

Clone this repo onto your local environment, execute the command in `PowerShell` **with admin privilege**:  
```powershell
git clone https://github.com/gottyduke/SKSEPlugins
cd .\SKSEPlugins
Set-ExecutionPolicy Bypass -Scope Process
.\!Rebuild BOOTSTRAP
```  
> `BOOTSTRAP` process is required


<h2 align="center">New Project</h2>

```
!MakeNew <PluginName> 
    [-install 'PluginMO2InstallName'] 
    [-message 'Short description for plugin project'] 
    [-vcpkg 'Lib1[Feature1, Feature2]', 'Lib2', 'Lib3']
```
To generate a project with `imgui` and `xbyak` vcpkg dependencies:  
`.\!MakeNew MyNewPlugin -vcpkg 'imgui[dx11-binding, win32-binding]', 'xbyak'`


<h2 align="center">Generate VS Solution</h2>

```
!Rebuild <MT|MD> <AE|SE> 
    [-Custom] 
    [-WhatIf]
    [-D]
```
To generate a solution targetting special edition with `MultiThreadedDLL` configuration:  
`.\!Rebuild MD SE`  
To pass additional arguments to CMake generator, use `-D` switch the same way as CMake format.  
> All projects generated by `!MakeNew` command will auto switch to current build target `AE|SE`


<h2 align="center">Preview CMakeLists</h2>

Append the switch `-WhatIf` to the `!Rebuild` command. This action will not initiate CMake generator.  


<h2 align="center">Add/Remove files</h2>

Supports **directly** adding/removing files in VS by right clicking `Add New Files`, it will be immediately usable with access to all included directories.  

All changes in the files before, between, and after building will be carried over to the source folder. When reloading VS projects after the second build, the newly added files may lose focus in VS tabs if they were open before reloading, simply re-open them from VS solution explorer.   


<h2 align="center">SE/AE code separation</h2>

Code blocks separated by preprocessor macro `ANNIVERSARY_EDITION` will switch automatically based on current build target.  
```C++
#if ANNIVERSARY_EDITION
// Do AE stuff
#else
// Do SE stuff
#endif
```


<h2 align="center">VCPKG</h2>

`!Rebuild` auto gathers vcpkg dependencies from sub projects and build them if needed. `!Rebuild` also validates sub project's `CMakeLists.txt` if the vcpkg dependency usage matches the `vcpkg.json`.  

If a project specified additional dependency in `vcpkg.json` without referring to it in the `CMakeLists.txt` (intentional or not), `!Rebuild` will ensure such vcpkg dependency is available and linked to the target project.  

All these actions are done in the generated top level `CMakeLists.txt` and will not affect the sub project's local `CMakeLists.txt`, however a concern message will be displayed after `!Rebuild` is complete.  


<h2 align="center">Versioning</h2>

Version info may be changed in two ways :
+ Changes in project's `CMakeLists.txt` will be in effect after project is built. 
+ If the Visual Studio solution is open, version info may be updated in the project's `include/Version.h` file, the update will be in effect after build.  

When using the latter, make sure to change both version value and version string (`"x.x.x"sv`).


<h2 align="center">CommonLib</h2>

`!Rebuild` builds with [default CommonLib](https://github.com/Ryan-rsm-McKenzie/CommonLibSSE). To use a custom CommonLib, then append the switch `-C` or `-Custom` to the `!Rebuild` command.  
> When using custom CommonLib, `!Rebuild` assumes it's for current build target (`AE|SE`)  


<h2 align="center">DKUtil</h2>

This build setup bundles `DKUtil` header library, full documentation can be found [here](https://github.com/gottyduke/DKUtil).

---
<p align="center">Author: Dropkicker & Maxsu @ 2021</p>